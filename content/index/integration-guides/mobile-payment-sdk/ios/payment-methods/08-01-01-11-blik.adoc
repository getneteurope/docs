
[#MobilePaymentSDK_iOS_Blik]
---
== *POA/PIA Blik*
---
=== Supported https://docs.getneteurope.com/AppendixB.html[Transaction Types]
---
This payment method supports the following
https://docs.getneteurope.com/AppendixB.html[transaction
types]:

* *`SDKPayECTransactionTypeDebit`* - Moves funds from the [Account Holder] to the [Merchant].

[#MobilePaymentSDK_iOS_Blik_basic_setup]
=== Basic Setup
---
[#MobilePaymentSDK_iOS_Blik_basic_setup_cocoapods]
==== Cocoapods
---
Add to your appâ€™s `Podfile` subspecs:
 
[source,ruby]
----
pod 'Getnet/Blik',          '~> {{version}}'
----

[#MobilePaymentSDK_iOS_Blik_LevelZero_basic_payment]
==== Blik Level Zero Payment

This is a code example for a basic Blik Level Zero payment:


[source,swift]
----
// 1. Initialize ``SDKPayECClient``
   do {
      try self.client = SDKPayECClient.init(hostname: hostname)
   } catch {
      // the device is checked during initialization for jailbreak.
      // It is risky to make payments on jailbroken devices.
      return
   }

// 2. Initialize payment object and set mandatory properties
// Parameters (amount, currency, transactionType) shall be sent to server for validation or just provided by server
// and used to generate signature. Signature MUST be generated on server side.
// Signature doc: https://docs.getneteurope.com/_mobile_payment_sdk.html#MobilePaymentSDK_BasicSetup_Security_Signaturev2
// Secret Key shall never be stored in application.

   let payment = SDKPayECBlikPayment()
   payment.amount = AMOUNT
   payment.currency = SDKPayECCurrencyGetISOCode(SDKPayECCurrency.EUR)
   
   payment.transactionType = SDKPayECTransactionType.debit

   let accountHolder = SDKPayECCustomerData.init()
   accountHolder.firstName = "John"
   accountHolder.lastName = "Doe"
   accountHolder.email = "joe.doe@email.com"
   accountHolder.dateOfBirth = Date()
   accountHolder.gender = SDKPayECGender.male
   accountHolder.phone = "+00123456789"
   accountHolder.address = SDKPayECAddress()
   accountHolder.address?.street1 = "Elm Street !428"
   accountHolder.address?.city = "Springwood"
   accountHolder.address?.postalCode = "04001"
   accountHolder.address?.state = "Ohio"
   accountHolder.address?.country = SDKPayECCountry.DE
   payment.accountHolder = accountHolder
 
   var cartOrder = [SDKPayECOrderItem]()

   let order = SDKPayECOrder()
   order.descriptor = "DEMO DESCRIPTOR"
   order.number = NSUUID.init().uuidString
   order.detail = "DEMO ORDER DETAIL"
   order.items = cartOrder
   payment.order = order

```
----


[#MobilePaymentSDK_iOS_Blik_Redirect_basic_payment]
==== Blik Redirect Payment

This is a code example for a basic Blik Redirect payment:


[source,swift]
----
// 1. Initialize ``SDKPayECClient``
   do {
      try self.client = SDKPayECClient.init(hostname: hostname)
   } catch {
      // the device is checked during initialization for jailbreak.
      // It is risky to make payments on jailbroken devices.
      return
   }

// 2. Initialize payment object and set mandatory properties
// Parameters (amount, currency, transactionType) shall be sent to server for validation or just provided by server
// and used to generate signature. Signature MUST be generated on server side.
// Signature doc: https://docs.getneteurope.com/_mobile_payment_sdk.html#MobilePaymentSDK_BasicSetup_Security_Signaturev2
// Secret Key shall never be stored in application.

   let payment = SDKPayECBlikPayment()
   payment.amount = AMOUNT
   payment.currency = SDKPayECCurrencyGetISOCode(SDKPayECCurrency.EUR)
   
   payment.transactionType = SDKPayECTransactionType.debit

   let accountHolder = SDKPayECCustomerData.init()
   accountHolder.firstName = "John"
   accountHolder.lastName = "Doe"
   accountHolder.email = "joe.doe@email.com"
   accountHolder.dateOfBirth = Date()
   accountHolder.gender = SDKPayECGender.male
   accountHolder.phone = "+00123456789"
   accountHolder.address = SDKPayECAddress()
   accountHolder.address?.street1 = "Elm Street !428"
   accountHolder.address?.city = "Springwood"
   accountHolder.address?.postalCode = "04001"
   accountHolder.address?.state = "Ohio"
   accountHolder.address?.country = SDKPayECCountry.DE
   payment.accountHolder = accountHolder
 
   var cartOrder = [SDKPayECOrderItem]()

   let order = SDKPayECOrder()
   order.descriptor = "DEMO DESCRIPTOR"
   order.number = NSUUID.init().uuidString
   order.detail = "DEMO ORDER DETAIL"
   order.items = cartOrder
   payment.order = order
   
   let notif = SDKPayECNotification.init()
   notif.transactionState = SDKPayECTransactionState.success
   payment.notifications = [notif]

```
----
//-

[TIP]
====
You can set optional parameters after the payment object is created. Check the documentation <<API_Blik_Fields, Blik>> payment method for more details.
====

//-

[#MobilePaymentSDK_iOS_Blik_Visualisaton]
=== Visualisation
---

[%autowidth, cols="a,a", frame=none, grid=none, role="center"]
|===
| ZeroLevel | Customized

| image::images/07-01-02-integrating-mpsdk-on-ios/iOS/blik-zerolevel.png[Blik ZeroLevel Screen, align=center, width=240, height=420]
| image::images/07-01-02-integrating-mpsdk-on-ios/iOS/blik-zerolevel-customized.png[Blik ZeroLevel Screen, align=center, width=240, height=420]
|
|===

[%autowidth, cols="a,a", frame=none, grid=none, role="center"]
|===
| Redirect | Customized

| image::images/07-01-02-integrating-mpsdk-on-ios/iOS/blik-redirect.png[Blik Redirect Screen, align=center, width=240, height=420]
| image::images/07-01-02-integrating-mpsdk-on-ios/iOS/blik-redirect-customized.png[Blik Redirect Screen, align=center, width=240, height=420]
|
|===

[NOTE]
====
Visualization of Blik result is up to the merchant applicaton. SDK returns IBAN, BIC, Provider Reference ID and others parameters in payment response. It should be visualized in order for the consumer to be able to check the bank transfer.
====

[#MobilePaymentSDK_iOS_Blik_Visualisaton_Card_CustomizingVisuals]
=== Customizing Visuals
---
To change colors within the SDK, set properties of the components, that
conforms to UIAppearance protocol. Changing any of these will affect
every module used in the SDK.

[arabic]
. `SDKPayECNavigationBar control` - a top navigation bar supports the next appearance:
   .. `preferredStatusBarStyle` - navigation bar style 'SDKPayECNavigationBarStyle' defines the height of the navigation bar top save area of the screen. It can be defined with two possible values:
      - `.small` - a smaller size navigation bar with a title,
      - `.big` - a bigger size navigation bar with possibly a title and a subtitle. The big size of the bar is possible when the next content of the screen is fully readable. If not the navigation bar size is automatically changed to the small size of the navigation bar.
   .. `barStyle` - navigation bar style 'SDKPayECStatusBarStyle' defines the content colors of the navigation bar. It can be defined with three possible values:
      - `.darkContent` - Dark content, for use on light backgrounds, 
      - `.lightContent` - Light content, for use on dark backgrounds, 
      - `.auto` - Custom content, for use on backgrounds by the background color of SDKPayECNavigationBar control
   .. `backgroundColor` - background color
   .. `firstBackgroundColor` - first gradient background color. It is used when the background appearance color is nil. 
   .. `secondBackgroundColor` - second gradient background color. It is used when the background appearance color is nil.
   .. `UIView` appearance

. `SDKPayECCancelButton` - cancel button inside the SDKPayECNavigationBar navigation bar
   .. `UIButton` appearance

. `SDKPayECHeaderLabel` - title label inside the SDKPayECNavigationBar navigation bar
   .. `UILabel` appearance

. `SDKPayECTextField` - 
   .. `UITextField` appearance

. `SDKPayECSubmitButton` - submit button inside the SDKPayECNavigationBar navigation bar
   .. `UIButton` appearance

. `SDKPayECTView` - 
   .. `UIView` appearance

[#MobilePaymentSDK_iOS_Blick_Visualisaton_Card_CustomizingVisuals_Example]
==== Customization Example
---

This is a code example for a basic Blik screen customization:

[source,swift]
----
      let blue = UIColor(red: 0.0/255.0, green: 90.0/255.0, blue: 160.0/255.0, alpha: 1.0)
      let yellow = UIColor(red: 251.0/255.0, green: 187.0/255.0, blue: 1.0/255.0, alpha: 1.0)
      let red = UIColor(red: 237.0/255.0, green: 24.0/255.0, blue: 70.0/255.0, alpha: 1.0)
      let orange = UIColor(red: 255.0/255.0, green: 155.0/255.0, blue: 4.0/255.0, alpha: 1.0)
      let firstBgColor = red
      let secondBgColor = yellow

      SDKPayECNavigationBar.appearance().preferredStatusBarStyle = .auto
      SDKPayECNavigationBar.appearance().firstBackgroundColor = firstBgColor
      SDKPayECNavigationBar.appearance().secondBackgroundColor = secondBgColor

      SDKPayECCancelButton.appearance().setTitleColor(yellow, for: .normal)
      SDKPayECCancelButton.appearance().setTitle("Close", for: .normal)
      SDKPayECCancelButton.appearance().backgroundColor = nil

      SDKPayECSubmitButton.appearance().setTitleColor(UIColor.black, for: .disabled)
      SDKPayECSubmitButton.appearance().setTitleColor(UIColor.white, for: .normal)
      SDKPayECSubmitButton.appearance().setTitle("Send", for: .normal)
      SDKPayECSubmitButton.appearance().backgroundColor = orange

      SDKPayECHeaderLabel.appearance().textColor = UIColor.black

      SDKPayECTextField.appearance().textColor = UIColor.black
      SDKPayECTextField.appearance().placeholderColor = UIColor.lightGray
      SDKPayECTextField.appearance().iconsStyle = .iconsStyleAll
      SDKPayECTextField.appearance().underlineColor = red
      SDKPayECTextField.appearance().underlineEditingColor = red
      SDKPayECTextField.appearance().errorColor = blue

      SDKPayECView.appearance().backgroundColor = yellow
----

[%autowidth, cols="a,a", frame=none, grid=none, role="center"]
|===
| ZeroLevel | Customized

| image::images/07-01-02-integrating-mpsdk-on-ios/iOS/blik-zerolevel-appearance.png[Blik ZeroLevel Screen, align=center, width=240, height=420]
| image::images/07-01-02-integrating-mpsdk-on-ios/iOS/blik-zerolevel-customized-appearance.png[Blik ZeroLevel Screen, align=center, width=240, height=420]
|
|===

[%autowidth, cols="a,a", frame=none, grid=none, role="center"]
|===
| Redirect | Customized

| image::images/07-01-02-integrating-mpsdk-on-ios/iOS/blik-redirect-appearance.png[Blik Redirect Screen, align=center, width=240, height=420]
| image::images/07-01-02-integrating-mpsdk-on-ios/iOS/blik-redirect-customized-appearance.png[Blik Redirect Screen, align=center, width=240, height=420]
|
|===
//-