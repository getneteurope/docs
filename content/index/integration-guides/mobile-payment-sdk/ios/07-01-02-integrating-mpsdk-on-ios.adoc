[#MobilePaymentSDK_iOS]
== Integrating MPSDK on iOS

//-

[#MobilePaymentSDK_iOS_CreditCard]
=== *Credit Card*
---

==== Supported https://docs.getneteurope.com/AppendixB.html[Transaction Types]
---

This payment method supports the following
https://docs.getneteurope.com/AppendixB.html[transaction
types]:

* *`SDKPayECTransactionTypeAuthorization`* - places the account holder’s
funds on hold, pending future capture, re-authorization or void
transaction.
* *`SDKPayECTransactionTypeAuthorizationOnly`* - verifies the validity
of account holder’s card, but does not leave an authorized amount.
* *`SDKPayECTransactionTypePurchase`* - takes funds from the [Card Holder]'s account. A one-step process to conduct two Transaction Types: [Authorization] and [Capture]..
* *`SDKPayECTransactionTypeReferencedPurchase`* - takes funds from the [Card Holder]'s account. Identical to a [Purchase] except for the fact that it refers to a previous [Purchase] transaction.
* *`SDKPayECTransactionTypeTokenize`* - Provides a unique [Card Token] from sensitive Credit Card Data. The [Card Token] can be used in subsequent transactions instead of the card information itself.


[#MobilePaymentSDK_iOS_CreditCard_basic_setup]
==== Basic Setup
---

[#MobilePaymentSDK_iOS_CreditCard_basic_setup_cocoapods]
===== Cocoapods
---

Add to your app’s `Podfile` subspecs:
 
[source,ruby]
----
pod 'Getnet/Card',          '~> {{version}}'
----

[#MobilePaymentSDK_iOS_CreditCard_basic_payment]
==== Basic Credit Card Payment
---
This is a code example for a basic Credit Card payment:


[source,swift]
----
// 1. Initialize ``SDKPayECClient``
do {
    try self.client = SDKPayECClient.init(hostname: hostname)
} catch {
    // the device is checked during initialization for jailbreak.
    // It is risky to make payments on jailbroken devices.
    return
}

// 2. Initialize payment object and set mandatory properties
// Parameters (amount, currency, transactionType) shall be sent to server for validation or just provided by server
// and used to generate signature. Signature MUST be generated on server side.
// Signature doc: https://document-center.wirecard.com/display/PTD/Signature+v2
// Secret Key shall never be stored in application.

let payment = SDKPayECCardPayment()
payment.merchantAccountID = merchantAccountID  // provided by merchant support
payment.requestID = requestID                  // generated on server; unique for merchantAccountID
payment.amount = NSDecimalNumber(mantissa: 199, exponent: -2, isNegative: NO)
payment.currency = "EUR"
payment.transactionType = .purchase

// 3. Trigger the payment and handle response in payment completion block.
self.client?.make(payment, withCompletion:{(response: SDKPayECPaymentResponse?, error: Error?) in
// for each failure error object is provided;
    if let error = error {
        return
    }
    self.handleResponse(response)
})
```
----

//-

[TIP]
====
You can set optional parameters after the payment object is created. Check the documentation <<CC_Fields, Credit Card>> payment method for more details.

Credit Card payment supports
`SDKPayECPeriodicTypeRecurring`
recurring type. Check the API documentation <<GeneralPlatformFeatures_Transactions_Recurring, Recurring Transaction>> for more details.
====

//-

[#MobilePaymentSDK_iOS_CreditCard_recurring_payment]
==== Recurring Credit Card Payment
---
On a basic level, recurring payments have two phases:

[arabic]
. The initial request, which must include:
* periodic type set to
`SDKPayECPeriodicTypeRecurring`,
* sequence type set to
`SDKPayECSequenceTypeFirst`.
. The follow-up requests, which must include:
* periodic type set to
`SDKPayECPeriodicTypeRecurring`,
* sequence type set to
`SDKPayECSequenceTypeRecurring`,
* `parentTransactionId` value
from the initial request.

So in order to create a recurring payment, you need to:

[arabic]
. Send a initial request with the appropriate periodic and sequence
flags,
. Save the values of
`parentTransactionId`
field generated in this first payment,
. Reference these values in the follow-up request, then send it with
appropriate periodic and sequence flags.

This is a code example for a first recurring Credit Card payment:
[source,swift]
----
// First payment 

let firstPeriodicType = SDKPayECPeriodic() 
firstPeriodicType.periodicType = .recurring
firstPeriodicType.sequenceType = .first

let payment = SDKPayECCardPayment()
payment.merchantAccountID = merchantAccountID  
payment.requestID = requestID
payment.amount = NSDecimalNumber(mantissa: 199, exponent: -2, isNegative: NO)
payment.currency = "EUR"
payment.transactionType = .debit
let periodic = SDKPayECPeriodic()
periodic.periodicType = periodicType
periodic.sequenceType = sequenceType
payment.periodic = firstPeriodicType
payment.signature = signature
  
var parentTransactionID: String?
self.client?.make(payment, withCompletion:{(response: SDKPayECPaymentResponse?,error: Error?) in
    // for each failure error object is provided;
    if let error = error {
        return
    }
    self.handleResponse(response)
})

// Handle first result
func handleReponse(_ response: SDKPayECPaymentResponse?) {
    guard let response = response else { return }
    self.parentTransactionID = response.parentTransactionID
}

// Second payment using parentTransactionId

let firstPeriodicType = SDKPayECPeriodic()
firstPeriodicType.periodicType = .recurring
firstPeriodicType.sequenceType = .final
  
let payment = SDKPayECCardPayment()
payment.merchantAccountID = merchantAccountID  
payment.requestID = requestID
payment.parentTransactionID = self.parentTransactionID
payment.amount = NSDecimalNumber(mantissa: 199, exponent: -2, isNegative: NO)
payment.currency = "EUR"
payment.transactionType = .autorization

let periodic = SDKPayECPeriodic()
periodic.periodicType = periodicType
periodic.sequenceType = sequenceType
payment.periodic = firstPeriodicType
payment.signature = signature

self.client?.make(payment, withCompletion:{(response: SDKPayECPaymentResponse?,error: Error?) in
    // for each failure error object is provided;
    if let error = error {
        return
    }
    self.handleResponse(response)
})
```
----

[#MobilePaymentSDK_iOS_CreditCard_Visualisaton]
==== Visualisation
---
[#MobilePaymentSDK_iOS_CreditCard_Visualisaton_Card]
===== Card 
---

[%autowidth, cols="a,a", frame=none, grid=none, role="center"]
|===
| Default | Customized

| image::images/07-01-02-integrating-mpsdk-on-ios/iOS/credit-card-screen.png[Card Screen, align=center, width=240, height=420]
| image::images/07-01-02-integrating-mpsdk-on-ios/iOS/credit-card-screen-customized.png[Card Screen, align=center, width=240, height=420]
|
|===


[#MobilePaymentSDK_iOS_CreditCard_Visualisaton_Card_CustomizingVisuals]
====== Customizing Visuals
---

To change colors within the SDK, set properties of the components, that
conforms to UIAppearance protocol. Changing any of these will affect
every module used in the SDK.

[arabic]
. `SDKPayECCancelButtonImage`
. `SDKPayECCancelButton`
. `SDKPayECNavigationBar`


//-
[#MobilePaymentSDK_iOS_CreditCard_Visualisaton_CardAnimated]
===== Card Animated
---

[%autowidth, cols="a,a", frame=none, grid=none, role="center"]
|===
| Default | Customized

| image::images/07-01-02-integrating-mpsdk-on-ios/iOS/credit-card-animated-screen.png[Card Screen, align=center, width=240, height=420]
| image::images/07-01-02-integrating-mpsdk-on-ios/iOS/credit-card-animated-screen-customized.png[Card Screen, align=center, width=240, height=420]
|
|===


[#MobilePaymentSDK_iOS_CreditCard_Visualisaton_CardAnimated_CustomizingVisuals]
====== Customizing Visuals
---

To change colors within the SDK, set properties of the components, that
conforms to UIAppearance protocol. Changing any of these will affect
every module used in the SDK.

[arabic]
. `SDKPayECCancelButtonImage`
. `SDKPayECCancelButton`
. `SDKPayECNavigationBar`

//-


[#MobilePaymentSDK_iOS_CreditCard_Visualisaton_CardField]
===== CardField
---

``SDKPayCardField`` is a specialized field for collecting card data, with
properties similar to ``UITextField``. It is designed to fit in a single
line and can be used where an ``UITextField`` would be appropriate:

[%autowidth, cols="a,a", frame=none, grid=none, role="center"]
|===
| Default | Customized

| image::images/07-01-02-integrating-mpsdk-on-ios/iOS/credit-cardfield.png[Card Screen, align=center, width=240, height=420]
| image::images/07-01-02-integrating-mpsdk-on-ios/iOS/credit-cardfield-customized.png[Card Screen, align=center, width=240, height=420]
|
|===


Create a ``SDKPayCardField`` (programmatically, or in XIB/Storyboard) and
keep the instance reference in your ``UIViewController``:

[source,swift]
----
class CardfieldVC: UIViewController, SDKPayECCardFieldDelegate {
    
    @IBOutlet weak var cardField: SDKPayECCardField!
    @IBOutlet weak var payBtn: UIButton!
```
}
----

//-
[#MobilePaymentSDK_iOS_CreditCard_Visualisaton_CardField_CustomizingVisuals]
===== Customizing Visuals
---

To change colors within the SDK, set properties of the components, that
conforms to UIAppearance protocol. Changing any of these will affect
every module used in the SDK.

[arabic]
. `SDKPayECCancelButtonImage`
. `SDKPayECCancelButton`
. `SDKPayECNavigationBar`

//-

[#MobilePaymentSDK_iOS_CreditCard_Visualisaton_CardFieldAnimated]
===== CardField Animated Alternative
---

[%autowidth, cols="a,a", frame=none, grid=none, role="center"]
|===
| Default | Customized

| image::images/07-01-02-integrating-mpsdk-on-ios/iOS/credit-cardfield-animated.png[Card Screen, align=center, width=240, height=420]
| image::images/07-01-02-integrating-mpsdk-on-ios/iOS/credit-cardfield-animated-customized.png[Card Screen, align=center, width=240, height=420]
|
|===

[#MobilePaymentSDK_iOS_CreditCard_Visualisaton_CardFieldAnimated_CustomizingVisuals]
====== Customizing Visuals
---

To change colors within the SDK, set properties of the components, that
conforms to UIAppearance protocol. Changing any of these will affect
every module used in the SDK.

[arabic]
. `SDKPayECCancelButtonImage`
. `SDKPayECCancelButton`
. `SDKPayECNavigationBar`

//-

[#MobilePaymentSDK_iOS_PayPal]
---
=== *PayPal*
---

==== Supported https://docs.getneteurope.com/AppendixB.html[Transaction Types]
---

This payment method supports the following
https://docs.getneteurope.com/AppendixB.html[transaction
types]:

* *`SDKPayECTransactionTypeAuthorization`* - places the account holder’s
funds on hold, pending future capture, re-authorization or void
transaction.
* *`SDKPayECTransactionTypeAuthorizationOnly`* - verifies the validity
of account holder’s card, but does not leave an authorized amount.
* *`SDKPayECTransactionTypeDebit`* - Moves funds from the [Account Holder] to the [Merchant].

[#MobilePaymentSDK_iOS_PayPal_basic_setup]
==== Basic Setup
---

[#MobilePaymentSDK_iOS_PayPal_basic_setup_cocoapods]
===== Cocoapods
---

Add to your app’s `Podfile` subspecs:
 
[source,ruby]
----
pod 'Getnet/PayPal',          '~> {{version}}'
----

[#MobilePaymentSDK_iOS_PayPal_basic_payment]
===== PayPal Payment

This is a code example for a basic PayPal payment:


[source,swift]
----
// 1. Initialize ``SDKPayECClient``
   do {
      try self.client = SDKPayECClient.init(hostname: hostname)
   } catch {
      // the device is checked during initialization for jailbreak.
      // It is risky to make payments on jailbroken devices.
      return
   }

// 2. Initialize payment object and set mandatory properties
// Parameters (amount, currency, transactionType) shall be sent to server for validation or just provided by server
// and used to generate signature. Signature MUST be generated on server side.
// Signature doc: https://document-center.wirecard.com/display/PTD/Signature+v2
// Secret Key shall never be stored in application.

   let orderItem = SDKPayECOrderItem()
   orderItem.name = "The Watch"
   orderItem.amount = AMOUNT;
   orderItem.amountCurrency = .EUR;

   let order = SDKPayECOrder()
   order.descriptor = "DEMO DESCRIPTOR"
   order.number = NSUUID.init().uuidString
   order.detail = "DEMO ORDER DETAIL"
   order.items = [orderItem]

   let payment = SDKPayECPayPalPayment()
   payment.appScheme = "example";
   payment.amount = AMOUNT
   payment.currency = "EUR"
   payment.transactionType = .authorization
   payment.order = order;

   let accountHolder = SDKPayECCustomerData.init()
   accountHolder.lastName = "Doe"
   payment.accountHolder = accountHolder

```
----

//-

[TIP]
====
You can set optional parameters after the payment object is created. Check the documentation <<API_PayPal_Fields, PayPal>> payment method for more details.

PayPal payment supports
`SDKPayECPeriodicTypeRecurring`
recurring type. Check the API documentation <<GeneralPlatformFeatures_Transactions_Recurring, Recurring Transaction>> for more details.
====

//-

[#MobilePaymentSDK_iOS_PayPal_recurring_payment]
==== Recurring PayPal Payment
---

On a basic level, recurring payments have two phases:

[arabic]
. The initial request, which must include:
* periodic type set to
`SDKPayECPeriodicTypeRecurring`,
* sequence type set to
`SDKPayECSequenceTypeFirst`.
. The follow-up requests, which must include:
* periodic type set to
`SDKPayECPeriodicTypeRecurring`,
* sequence type set to
`SDKPayECSequenceTypeRecurring`,
* `parentTransactionId` value
from the initial request.

So in order to create a recurring payment, you need to:

[arabic]
. Send a initial request with the appropriate periodic and sequence
flags,
. Save the values of
`parentTransactionId`
field generated in this first payment,
. Reference these values in the follow-up request, then send it with
appropriate periodic and sequence flags.

This is a code example for a first recurring PayPal payment:
[source,swift]
----
// First payment 

   let firstPeriodicType = SDKPayECPeriodic() 
   firstPeriodicType.periodicType = .recurring
   firstPeriodicType.sequenceType = .first

   let payment = SDKPayECPayPalPayment()
   payment.merchantAccountID = merchantAccountID  
   payment.requestID = requestID
   payment.amount = NSDecimalNumber(mantissa: 199, exponent: -2, isNegative: NO)
   payment.currency = "EUR"
   payment.transactionType = .debit
   let periodic = SDKPayECPeriodic()
   periodic.periodicType = periodicType
   periodic.sequenceType = sequenceType
   payment.periodic = firstPeriodicType
   payment.signature = signature
   
   var parentTransactionID: String?
   self.client?.make(payment, withCompletion:{(response: SDKPayECPaymentResponse?,error: Error?) in
      // for each failure error object is provided;
      if let error = error {
         return
      }
      self.handleResponse(response)
   })

   // Handle first result
   func handleReponse(_ response: SDKPayECPaymentResponse?) {
      guard let response = response else { return }
      self.parentTransactionID = response.parentTransactionID
   }

   // Second payment using parentTransactionId

   let firstPeriodicType = SDKPayECPeriodic()
   firstPeriodicType.periodicType = .recurring
   firstPeriodicType.sequenceType = .final
   
   let payment = SDKPayECPayPalPayment()
   payment.merchantAccountID = merchantAccountID  
   payment.requestID = requestID
   payment.parentTransactionID = self.parentTransactionID
   payment.amount = NSDecimalNumber(mantissa: 199, exponent: -2, isNegative: NO)
   payment.currency = "EUR"
   payment.transactionType = .autorization

   let periodic = SDKPayECPeriodic()
   periodic.periodicType = periodicType
   periodic.sequenceType = sequenceType
   payment.periodic = firstPeriodicType
   payment.signature = signature

   self.client?.make(payment, withCompletion:{(response: SDKPayECPaymentResponse?,error: Error?) in
      // for each failure error object is provided;
      if let error = error {
         return
      }
      self.handleResponse(response)
   })
```
----

[#MobilePaymentSDK_iOS_PayPal_Visualisaton]
==== Visualisation
---

[%autowidth, cols="a,a", frame=none, grid=none, role="center"]
|===
| Default | Customized

| image::images/07-01-02-integrating-mpsdk-on-ios/iOS/paypal.png[Card Screen, align=center, width=240, height=420]
| image::images/07-01-02-integrating-mpsdk-on-ios/iOS/paypal-customized.png[Card Screen, align=center, width=240, height=420]
|
|===

[#MobilePaymentSDK_iOS_PayPal_Visualisaton_Card_CustomizingVisuals]
===== Customizing Visuals
---

To change colors within the SDK, set properties of the components, that
conforms to UIAppearance protocol. Changing any of these will affect
every module used in the SDK.

[arabic]
. `SDKPayECCancelButtonImage`
. `SDKPayECCancelButton`
. `SDKPayECNavigationBar`
. `SDKPayECAmountLabel`

//-


[#MobilePaymentSDK_iOS_SEPA]
---
=== *SEPA Direct Debit*
---
==== Supported https://docs.getneteurope.com/AppendixB.html[Transaction Types]
---
This payment method supports the following
https://docs.getneteurope.com/AppendixB.html[transaction
types]:

* *`SDKPayECTransactionTypeAuthorization`* - places the account holder’s
funds on hold, pending future capture, re-authorization or void
transaction.
* *`SDKPayECTransactionTypeAuthorizationOnly`* - verifies the validity
of account holder’s card, but does not leave an authorized amount.
* *`SDKPayECTransactionTypeDebit`* - Moves funds from the [Account Holder] to the [Merchant].
* *`SDKPayECTransactionPendingDebit`* - represents the request for a debit. If the [Transaction State] is success, then the outcome of the debit is not yet known. A further [Transaction Type] of debit follows, whose [Transaction State] indicates the outcome. If the [Transaction State] of the pending-debit is failed, then the request has not been processed.

[#MobilePaymentSDK_iOS_SEPA_basic_setup]
==== Basic Setup
---
[#MobilePaymentSDK_iOS_SEPA_basic_setup_cocoapods]
===== Cocoapods
---
Add to your app’s `Podfile` subspecs:
 
[source,ruby]
----
pod 'Getnet/SEPA',          '~> {{version}}'
----

[#MobilePaymentSDK_iOS_SEPA_basic_payment]
==== SEPA Payment
---
This is a code example for a basic SEPA payment:


[source,swift]
----
// 1. Initialize ``SDKPayECClient``
   do {
      try self.client = SDKPayECClient.init(hostname: hostname)
   } catch {
      // the device is checked during initialization for jailbreak.
      // It is risky to make payments on jailbroken devices.
      return
   }

// 2. Initialize payment object and set mandatory properties
// Parameters (amount, currency, transactionType) shall be sent to server for validation or just provided by server
// and used to generate signature. Signature MUST be generated on server side.
// Signature doc: https://document-center.wirecard.com/display/PTD/Signature+v2
// Secret Key shall never be stored in application.

   let payment = SDKPayECSEPAPayment()
   payment.appScheme = "example";
   payment.amount = AMOUNT
   payment.currency = "EUR"
   payment.transactionType = .debit

```
----

//-

[TIP]
====
You can set optional parameters after the payment object is created. Check the documentation <<SEPADirectDebit_Fields, SEPA Direct Debit>> payment method for more details.

SEPA payment supports
`SDKPayECPeriodicTypeRecurring`
recurring type. Check the API documentation <<GeneralPlatformFeatures_Transactions_Recurring, Recurring Transaction>> for more details.
====

//-

[#MobilePaymentSDK_iOS_SEPA_recurring_payment]
==== Recurring SEPA Payment
---
On a basic level, recurring payments have two phases:

[arabic]
. The initial request, which must include:
* periodic type set to `SDKPayECPeriodicTypeRecurring`,
* sequence type set to `SDKPayECSequenceTypeFirst`.
. The follow-up requests, which must include:
* periodic type set to `SDKPayECPeriodicTypeRecurring`,
* sequence type set to `SDKPayECSequenceTypeRecurring`,
* `parentTransactionId`
value from the initial request.

So in order to create a recurring payment, you need to:

[arabic]
. Send a initial request with the appropriate periodic and sequence
flags,
. Save the values of
`parentTransactionId`
field generated in this first payment,
. Reference these values in the follow-up request, then send it with
appropriate periodic and sequence flags.

This is a code example for a first recurring SEPA payment:
[source,swift]
----
// First payment 

   let firstPeriodicType = SDKPayECPeriodic() 
   firstPeriodicType.periodicType = .recurring
   firstPeriodicType.sequenceType = .first

   let payment = SDKPayECSEPAPayment()
   payment.merchantAccountID = merchantAccountID  
   payment.requestID = requestID
   payment.amount = NSDecimalNumber(mantissa: 199, exponent: -2, isNegative: NO)
   payment.currency = "EUR"
   payment.transactionType = .debit
   let periodic = SDKPayECPeriodic()
   periodic.periodicType = periodicType
   periodic.sequenceType = sequenceType
   payment.periodic = firstPeriodicType
   payment.signature = signature
   
   var parentTransactionID: String?
   self.client?.make(payment, withCompletion:{(response: SDKPayECPaymentResponse?,error: Error?) in
      // for each failure error object is provided;
      if let error = error {
         return
      }
      self.handleResponse(response)
   })

   // Handle first result
   func handleReponse(_ response: SDKPayECPaymentResponse?) {
      guard let response = response else { return }
      self.parentTransactionID = response.parentTransactionID
   }

   // Second payment using parentTransactionId

   let firstPeriodicType = SDKPayECPeriodic()
   firstPeriodicType.periodicType = .recurring
   firstPeriodicType.sequenceType = .final
   
   let payment = SDKPayECSEPAPayment()
   payment.merchantAccountID = merchantAccountID  
   payment.requestID = requestID
   payment.parentTransactionID = self.parentTransactionID
   payment.amount = NSDecimalNumber(mantissa: 199, exponent: -2, isNegative: NO)
   payment.currency = "EUR"
   payment.transactionType = .autorization

   let periodic = SDKPayECPeriodic()
   periodic.periodicType = periodicType
   periodic.sequenceType = sequenceType
   payment.periodic = firstPeriodicType
   payment.signature = signature

   self.client?.make(payment, withCompletion:{(response: SDKPayECPaymentResponse?,error: Error?) in
      // for each failure error object is provided;
      if let error = error {
         return
      }
      self.handleResponse(response)
   })
```
----

[#MobilePaymentSDK_iOS_SEPA_Visualisaton]
==== Visualisation
---

[%autowidth, cols="a,a", frame=none, grid=none, role="center"]
|===
| Default | Customized

| image::images/07-01-02-integrating-mpsdk-on-ios/iOS/sepa.png[Card Screen, align=center, width=240, height=420]
| image::images/07-01-02-integrating-mpsdk-on-ios/iOS/sepa-customized.png[Card Screen, align=center, width=240, height=420]
|
|===

[#MobilePaymentSDK_iOS_SEPA_Visualisaton_Card_CustomizingVisuals]
===== Customizing Visuals
---
To change colors within the SDK, set properties of the components, that
conforms to UIAppearance protocol. Changing any of these will affect
every module used in the SDK.

[arabic]
. `SDKPayECView`
. `SDKPayECCancelButtonImage`
. `SDKPayECCancelButton`
. `SDKPayECSubmitButton`
. `SDKPayECNavigationBar`
. `SDKPayECAmountLabel`
. `SDKPayECTextField`
. `SDKPayECSwitch` 


//-

[#MobilePaymentSDK_iOS_Alipay]
---
=== *Alipay Cross Border*
---

==== Supported https://docs.getneteurope.com/AppendixB.html[Transaction Types]
---
This payment method supports the following
https://docs.getneteurope.com/AppendixB.html[transaction
types]:

- *`SDKPayECTransactionTypeDebit`* - Moves funds from the [Account Holder] to the [Merchant].

[#MobilePaymentSDK_iOS_Alipay_basic_setup]
===== Basic Setup
---

[#MobilePaymentSDK_iOS_Alipay_basic_setup_cocoapods]
====== Cocoapods

Add to your app’s `Podfile` subspecs:
 
[source,ruby]
----
pod 'Getnet/Alipay',          '~> {{version}}'
----

[#MobilePaymentSDK_iOS_Alipay_basic_payment]
==== Alipay Payment
---
This is a code example for a basic Alipay payment:


[source,swift]
----
// 1. Initialize ``SDKPayECClient``
   do {
      try self.client = SDKPayECClient.init(hostname: hostname)
   } catch {
      // the device is checked during initialization for jailbreak.
      // It is risky to make payments on jailbroken devices.
      return
   }

// 2. Initialize payment object and set mandatory properties
// Parameters (amount, currency, transactionType) shall be sent to server for validation or just provided by server
// and used to generate signature. Signature MUST be generated on server side.
// Signature doc: https://document-center.wirecard.com/display/PTD/Signature+v2
// Secret Key shall never be stored in application.

   let payment = SDKPayECAlipayPayment()
   payment.amount = AMOUNT
   payment.currency = SDKPayECCurrencyGetISOCode(SDKPayECCurrency.USD)

   let localize = SDKPayECLocalize.appearance()
   let locale_de = localize.locale == ._de;

   payment.transactionType = SDKPayECTransactionType.debit
   payment.ipAddress = "127.0.0.1"

   let accountHolder = SDKPayECCustomerData.init()
   accountHolder.firstName = "John"
   accountHolder.lastName = "Doe"
   accountHolder.email = "john.doe@getneteurope.com"
   payment.accountHolder = accountHolder

   let order = SDKPayECOrder.init();
   order.number = "180528105918955"
   order.detail = "DemoShop product 002"
   payment.order = order;
   payment.locale = locale_de ? SDKPayECLocale._de : SDKPayECLocale._en


```
----

//-

[TIP]
====
You can set optional parameters after the payment object is created. Check the documentation <<API_AlipayCrossBorder_Fields, Alipay Cross Border>> payment method for more details.
====

//-
[#MobilePaymentSDK_iOS_Alipay_Visualisaton]
==== Visualisation
---

[%autowidth, cols="a,a", frame=none, grid=none, role="center"]
|===
| Default | Customized

| image::images/07-01-02-integrating-mpsdk-on-ios/iOS/alipay.png[Alipay Screen, align=center, width=240, height=420]
| image::images/07-01-02-integrating-mpsdk-on-ios/iOS/alipay-customized.png[Alipay Screen, align=center, width=240, height=420]
|
|===

[#MobilePaymentSDK_iOS_Alipay_Visualisaton_Card_CustomizingVisuals]
==== Customizing Visuals
---
To change colors within the SDK, set properties of the components, that
conforms to UIAppearance protocol. Changing any of these will affect
every module used in the SDK.

[arabic]
. `SDKPayECCancelButtonImage`
. `SDKPayECCancelButton`
. `SDKPayECNavigationBar`

//-

/[#MobilePaymentSDK_iOS_WireTransfer]
=== POA/PIA WireTransfer

==== Supported https://docs.getneteurope.com/AppendixB.html[Transaction Types]

This payment method supports the following
https://docs.getneteurope.com/AppendixB.html[transaction
types]:

* *`SDKPayECTransactionTypeAuthorization`* - places the account holder’s
funds on hold, pending future capture, re-authorization or void
transaction.

[#MobilePaymentSDK_iOS_WireTransfer_basic_setup]
==== Basic Setup

[#MobilePaymentSDK_iOS_WireTransfer_basic_setup_cocoapods]
===== Cocoapods

Add to your app’s `Podfile` subspecs:
 
[source,ruby]
----
pod 'Getnet/WireTransfer',          '~> {{version}}'
----

[#MobilePaymentSDK_iOS_WireTransfer]
---
=== *POA/PIA WireTransfer*
---
==== Supported https://docs.getneteurope.com/AppendixB.html[Transaction Types]
---
This payment method supports the following
https://docs.getneteurope.com/AppendixB.html[transaction
types]:

* *`SDKPayECTransactionTypeAuthorization`* - places the account holder’s
funds on hold, pending future capture, re-authorization or void
transaction.

[#MobilePaymentSDK_iOS_WireTransfer_basic_setup]
==== Basic Setup
---
[#MobilePaymentSDK_iOS_WireTransfer_basic_setup_cocoapods]
===== Cocoapods
---
Add to your app’s `Podfile` subspecs:
 
[source,ruby]
----
pod 'Getnet/WireTransfer',          '~> {{version}}'
----

[#MobilePaymentSDK_iOS_WireTransfer_basic_payment]
===== WireTransfer Payment

This is a code example for a basic WireTransfer payment:


[source,swift]
----
// 1. Initialize ``SDKPayECClient``
   do {
      try self.client = SDKPayECClient.init(hostname: hostname)
   } catch {
      // the device is checked during initialization for jailbreak.
      // It is risky to make payments on jailbroken devices.
      return
   }

// 2. Initialize payment object and set mandatory properties
// Parameters (amount, currency, transactionType) shall be sent to server for validation or just provided by server
// and used to generate signature. Signature MUST be generated on server side.
// Signature doc: https://document-center.wirecard.com/display/PTD/Signature+v2
// Secret Key shall never be stored in application.

   let payment = SDKPayECWireTransferPayment()
   payment.amount = AMOUNT
   payment.currency = SDKPayECCurrencyGetISOCode(SDKPayECCurrency.EUR)
   
   payment.transactionType = SDKPayECTransactionType.authorization

   let accountHolder = SDKPayECCustomerData.init()
   accountHolder.lastName = "Doe"
   payment.accountHolder = accountHolder
   
   let notif = SDKPayECNotification.init()
   notif.transactionState = SDKPayECTransactionState.success
   payment.notifications = [notif]

```
----

//-

[TIP]
====

You can set optional parameters after the payment object is created. Check the documentation <<API_POIPIA_Fields, POI/PIA>> payment method for more details.

====

//-

[#MobilePaymentSDK_iOS_WireTransfer_Visualisaton]
==== Visualisation
---
image::images/07-01-02-integrating-mpsdk-on-ios/iOS/wire-transfer.png[WireTransfer Screen, align=center, width=240, height=420]

//-

[#MobilePaymentSDK_iOS_P24]
=== P24

==== Supported https://docs.getneteurope.com/AppendixB.html[Transaction Types]

This payment method supports the following
https://docs.getneteurope.com/AppendixB.html[transaction
types]:

* *`SDKPayECTransactionTypeDebit`* - todo.

[#MobilePaymentSDK_iOS_P24]
---
=== *P24 (Przelewy24)*
---
==== Supported https://docs.getneteurope.com/AppendixB.html[Transaction Types]
---
This payment method supports the following
https://docs.getneteurope.com/AppendixB.html[transaction
types]:

* *`SDKPayECTransactionTypeDebit`* - Moves funds from the [Account Holder] to the [Merchant].

[#MobilePaymentSDK_iOS_P24_basic_setup]
==== Basic Setup
---
[#MobilePaymentSDK_iOS_P24_basic_setup_cocoapods]
===== Cocoapods
---
Add to your app’s `Podfile` subspecs:
 
[source,ruby]
----
pod 'Getnet/P24',          '~> {{version}}'
----

[#MobilePaymentSDK_iOS_P24_basic_payment]
==== P24 Payment
---
This is a code example for a basic P24 payment:


[source,swift]
----
// 1. Initialize ``SDKPayECClient``
   do {
      try self.client = SDKPayECClient.init(hostname: hostname)
   } catch {
      // the device is checked during initialization for jailbreak.
      // It is risky to make payments on jailbroken devices.
      return
   }

// 2. Initialize payment object and set mandatory properties
// Parameters (amount, currency, transactionType) shall be sent to server for validation or just provided by server
// and used to generate signature. Signature MUST be generated on server side.
// Signature doc: https://document-center.wirecard.com/display/PTD/Signature+v2
// Secret Key shall never be stored in application.

   let payment = SDKPayECP24Payment()
   payment.amount = AMOUNT
   payment.currency = SDKPayECCurrencyGetISOCode(SDKPayECCurrency.PLN)

   payment.transactionType = SDKPayECTransactionType.debit

   let accountHolder = SDKPayECCustomerData.init()
   accountHolder.firstName = "John"
   accountHolder.lastName = "Doe"
   accountHolder.email = "joe.doe@mail.com"
   payment.accountHolder = accountHolder

```
----

//-

[TIP]
====
You can set optional parameters after the payment object is created. Check the documentation <<Przelewy24_Fields, Przelewy24>> payment method for more details.
====

[#MobilePaymentSDK_iOS_P24_Visualisaton]
==== Visualisation
---

[%autowidth, cols="a,a", frame=none, grid=none, role="center"]
|===
| Default | Customized

| image::images/07-01-02-integrating-mpsdk-on-ios/iOS/p24.png[Card Screen, align=center, width=240, height=420]
| image::images/07-01-02-integrating-mpsdk-on-ios/iOS/p24-customized.png[Card Screen, align=center, width=240, height=420]
|
|===

[#MobilePaymentSDK_iOS_P24_Visualisaton_Card_CustomizingVisuals]
===== Customizing Visuals
---
To change colors within the SDK, set properties of the components, that
conforms to UIAppearance protocol. Changing any of these will affect
every module used in the SDK.

[arabic]
. `SDKPayECCancelButtonImage`
. `SDKPayECCancelButton`
. `SDKPayECNavigationBar`

//-

[#MobilePaymentSDK_iOS_Scanner]

---
=== *Scanner Utilities*
---

For the input process of the card data or IBAN to be as quick and professional as possible, use your phone’s camera to scan credit cards and IBAN instead by manual input with scanner frameworks.

[#MobilePaymentSDK_iOS_Card_Scanner]
==== Card Scanner
---

The card scanner provides primary the card number detection. When it is possible it detects the expiration date too.

[#MobilePaymentSDK_iOS_Card_Scanner_basic_setup]
===== Basic Setup
---

Add to your app’s `Podfile` subspecs: 
[source,ruby]
----
pod 'Getnet/CardScanner',          '~> {{version}}'
----

The MPSDK adds the scanner button to the card number's textfield, the cardfield component alebo the keyboard toolbar.

[#MobilePaymentSDK_iOS_Card_Scanner_Integration]
===== Integration
---

When you use standart card view MPSDK automatically inserts the scan button to the keyboard toolbar.
The cardfield component inserts the scan button to the keyboard toolbar too. But there is possibility to shows scanner button directly on right side of component.

This is a code example for a card scanner integration for the SDKPayECCardFieldScanner component:

[source,swift]
----
import SDKPayeComCardScanner

class CardfieldVC: UIViewController, SDKPayECCardFieldDelegate {
    
    @IBOutlet weak var cardField: SDKPayECCardFieldScanner!
    @IBOutlet weak var cardFieldStateLabel: UILabel!
    @IBOutlet weak var payBtn: UIButton!
    @IBOutlet weak var clearBtn: UIButton!
    
    override func viewDidLoad() {
        super.viewDidLoad()
        self.cardField.becomeFirstResponder()

        let cardLayout = SDKPayECCardLayout.appearance()
        self.cardField.isManualCardBrandSelectionRequired = cardLayout.manualCardBrandSelectionRequired
        self.cardField.scanImage = UIImage(named: "scan_cf2")
        self.cardField.scanImageTintColor = UIColor.blue
        self.cardField.enableScanImageButton = true

        self.cardField.scanToolbarButtonTitle = "Scan Card"
        self.cardField.enableScanToolbarButton = true
        
        payBtn.setTitle(NSLocalizedString("form_submit", comment: ""), for: .normal)
    }
}
----

Or this is a code example for a card scanner integration for the SDKPayECAnimatedCardFieldScanner component:

[source,swift]
----
import SDKPayeComCardScanner

class CardfieldVC: UIViewController, SDKPayECCardFieldDelegate {
    
    @IBOutlet weak var cardField: SDKPayECAnimatedCardFieldScanner!
    @IBOutlet weak var cardFieldStateLabel: UILabel!
    @IBOutlet weak var payBtn: UIButton!
    @IBOutlet weak var clearBtn: UIButton!
    
    override func viewDidLoad() {
        super.viewDidLoad()
        self.cardField.becomeFirstResponder()

        let cardLayout = SDKPayECCardLayout.appearance()
        self.cardField.isManualCardBrandSelectionRequired = cardLayout.manualCardBrandSelectionRequired
        self.cardField.scanImage = UIImage(named: "scan_cf2")
        self.cardField.scanImageTintColor = UIColor.blue
        self.cardField.enableScanImageButton = true

        self.cardField.scanToolbarButtonTitle = "Scan Card"
        self.cardField.enableScanToolbarButton = true
        
        payBtn.setTitle(NSLocalizedString("form_submit", comment: ""), for: .normal)
    }
}
----

[#MobilePaymentSDK_iOS_Card_Scanner_Visualisaton]
===== Visualisation
---

====== Scanner Button
[%autowidth, cols="a,a,a,a", frame=none, grid=none, role="center"]
|===
| Card | Card Animated | Cardfield | Cardfield Animated

| image::images/07-01-02-integrating-mpsdk-on-ios/iOS/card-scanner-button.png[Card Screen, align=center, width=240, height=420]
| image::images/07-01-02-integrating-mpsdk-on-ios/iOS/card-scanner-button-animated.png[Card Animated Screen, align=center, width=240, height=420]
| image::images/07-01-02-integrating-mpsdk-on-ios/iOS/cardfield-scanner-button.png[Cardfield, align=center, width=240, height=420]
| image::images/07-01-02-integrating-mpsdk-on-ios/iOS/cardfield-scanner-animated-button.png[Cardfiel Animated, align=center, width=240, height=420]
|
|===

====== Scanner View Controller

[%autowidth, cols="a,a", frame=none, grid=none, role="center"]
|===
| Default | Customized

| image::images/07-01-02-integrating-mpsdk-on-ios/iOS/card-scanner.png[Card Scanner Screen, align=center, width=240, height=420]
| image::images/07-01-02-integrating-mpsdk-on-ios/iOS/card-scanner-customized.png[Card Scanner Customized Screen, align=center, width=240, height=420]
|
|===

[#MobilePaymentSDK_iOS_Card_Scanner_Visualisaton_Card_CustomizingVisuals]
===== Customizing Visuals
---
To change colors within the SDK, set properties of the components, that
conforms to UIAppearance protocol. Changing any of these will affect
every module used in the SDK. The cardfield component is fully customizable by component propreties and methods.

[arabic]
. `SDKPayECScannerNavigationBar`
. `SDKPayECScannerCancelButton`
. `SDKPayECScannerFlashlightButton`
. `SDKPayECScannerGalleryButton`
. `SDKPayECCardScannerTitleLabel`
. `SDKPayECCardScannerHelpLabel`
. `SDKPayECScannerBrackets`
. `SDKPayECCardScannerTitleLabel`

 

//-

[#MobilePaymentSDK_iOS_IBAN_Scanner]
==== IBAN Scanner
---

[#MobilePaymentSDK_iOS_IBAN_basic_setup]
===== Basic Setup
---
Add to your app’s `Podfile` subspecs:
 
[source,ruby]
----
pod 'Getnet/IBANScanner',          '~> {{version}}'
----

[#MobilePaymentSDK_iOS_IBAN_Scanner_Integration]
===== Integration
---

When you use standart SEPA view MPSDK automatically inserts the scan button to the keyboard toolbar.

[#MobilePaymentSDK_iOS_IBAN_Scanner_Visualisaton]
===== Visualisation
---

[#MobilePaymentSDK_iOS_IBAN_Scanner_Visualisaton_Scanner_Button]
====== Scanner Button

image::images/07-01-02-integrating-mpsdk-on-ios/iOS/iban-scanner-button.png[IBAN Scanner Button, align=center, width=240, height=420]

[#MobilePaymentSDK_iOS_IBAN_Scanner_Visualisaton_Scanner_View_Controller]
====== Scanner View Controller

[%autowidth, cols="a,a", frame=none, grid=none, role="center"]
|===
| Default | Customized

| image::images/07-01-02-integrating-mpsdk-on-ios/iOS/iban-scanner.png[IBAN Scanner Screen, align=center, width=240, height=420]
| image::images/07-01-02-integrating-mpsdk-on-ios/iOS/iban-scanner-customized.png[IBAN Scanner Customized Screen, align=center, width=240, height=420]
|
|===


[#MobilePaymentSDK_iOS_Card_Scanner_Visualisaton_IBAN_Scanner_CustomizingVisuals]
===== Customizing Visuals
---
To change colors within the SDK, set properties of the components, that
conforms to UIAppearance protocol. Changing any of these will affect
every module used in the SDK. The cardfield component is fully customizable by component propreties and methods.

[arabic]
. `SDKPayECScannerNavigationBar`
. `SDKPayECIBANScannerTitleLabel`
. `SDKPayECIBANScannerHelpLabel`
. `SDKPayECIBANScannerHelpLabel`
. `SDKPayECScannerBrackets`

//-

// [#MobilePaymentSDK_iOS_Photo_Gallery]
// ==== Photo Gallery
// ---

// For the input process of the card data or IBAN to be as quick and professional as possible, user can use for detection image of stored card resp. IBAN number to the Photos.  

// [#MobilePaymentSDK_iOS_Photo_Gallery_basic_setup]
// ===== Basic Setup
// ---
// Add to your app’s `Podfile` subspecs:
 
// [source,ruby]
// ----
// pod 'Getnet/CardScannerGallery',          '~> {{version}}'
// pod 'Getnet/IBANScannerGallery',          '~> {{version}}'
// ----

// [#MobilePaymentSDK_iOS_Photo_Gallery_Scanner_Integration]
// ===== Integration
// ---

// When you use standart SEPA or Card screen MPSDK automatically inserts the photo gallery button to the Scanner screen.

// [#MobilePaymentSDK_iOS_Photo_Gallery_Scanner_Visualisaton]
// ===== Visualisation
// ---

// [%autowidth, cols="a,a", frame=none, grid=none, role="center"]
// |===
// | Default | Customized

// | image::images/07-01-02-integrating-mpsdk-on-ios/iOS/card-scanner-gallery.png[Card Scanner GalleryScreen, align=center, width=240, height=420]
// | image::images/07-01-02-integrating-mpsdk-on-ios/iOS/sepa-scanner-gallery.png[IBAN Scanner Gallery Screen, align=center, width=240, height=420]
// |
// |===

// //-

